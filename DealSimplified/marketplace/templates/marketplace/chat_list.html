{% comment %} <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat List</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<div class="container-fluid">
    <div class="row vh-100">
        
        <!-- Sidebar Chat List -->
        <div class="col-md-4 bg-dark text-white p-3">
            <h4 class="mb-3">Chats</h4>
            <div class="list-group">
                {% for chat in chats %}
                    <a href="{% url 'chat_detail' chat.id %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center bg-secondary text-white">
                        <div>
                            <strong>
                                {% if chat.buyer == user %}
                                    {{ chat.seller.username }}
                                {% else %}
                                    {{ chat.buyer.username }}
                                {% endif %}
                            </strong>
                            <p class="mb-0 small text-light">{{ chat.last_message.content|truncatechars:40 }}</p>
                        </div>
                        <small class="text-light">{{ chat.last_message.timestamp|date:"H:i" }}</small>
                    </a>
                {% empty %}
                    <p class="text-center text-muted">No conversations yet.</p>
                {% endfor %}
            </div>
        </div>

        <!-- Main Chat Window Placeholder -->
        <div class="col-md-8 d-flex justify-content-center align-items-center">
            <h5 class="text-muted">Select a chat to start messaging</h5>
        </div>

    </div>
</div>

</body>
</html> {% endcomment %}
{% comment %} <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat List</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<div class="container-fluid">
    <div class="row vh-100">
        
        <!-- Sidebar Chat List -->
        <div class="col-md-4 bg-dark text-white p-3">
            <h4 class="mb-3">Chats</h4>
            <div class="list-group">
                <!-- Static Chat Links for Siri and Gemini -->
                <a href="{% url 'chat_detail' chat_id=1 %}" class="list-group-item list-group-item-action bg-secondary text-white">
                    <strong>Siri</strong>
                    <p class="mb-0 small text-light">Hello! How can I assist you?</p>
                </a>
                <a href="{% url 'chat_detail' chat_id=2 %}" class="list-group-item list-group-item-action bg-secondary text-white">
                    <strong>Gemini</strong>
                    <p class="mb-0 small text-light">Hey there! Need help with something?</p>
                </a>

                <!-- Dynamic Chat List -->
                {% for chat in chats %}
                    <a href="{% url 'chat_detail' chat.id %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center bg-secondary text-white">
                        <div>
                            <strong>
                                {% if chat.buyer == user %}
                                    {{ chat.seller.username }}
                                {% else %}
                                    {{ chat.buyer.username }}
                                {% endif %}
                            </strong>
                            <p class="mb-0 small text-light">{{ chat.last_message.content|truncatechars:40 }}</p>
                        </div>
                        <small class="text-light">{{ chat.last_message.timestamp|date:"H:i" }}</small>
                    </a>
                {% empty %}
                    <p class="text-center text-muted">No conversations yet.</p>
                {% endfor %}
            </div>
        </div>

        <!-- Main Chat Window Placeholder -->
        <div class="col-md-8 d-flex justify-content-center align-items-center">
            <h5 class="text-muted">Select a chat to start messaging</h5>
        </div>

    </div>
</div>

</body>
</html> {% endcomment %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Chats - DealSimplified</title>
</head>
<body>

<h2>My Chats</h2>

<div class="chat-list">
    {% if chats %}
        <ul>
            {% for chat in chats %}
                <li>
                    <a href="{% url 'chat_detail' chat.id %}">
                        <div>
                            <strong>{{ chat.seller.username }}</strong>  <!-- Show the seller's username -->
                            <p>Last message: {{ chat.messages.last.text|truncatewords:5 }}</p>  <!-- Show the last message in the chat -->
                        </div>
                    </a>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>You have no chats yet.</p>
    {% endif %}
</div>

</body>
</html>

